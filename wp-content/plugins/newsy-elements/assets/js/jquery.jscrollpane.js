!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(be){be.fn.jScrollPane=function(o){function i(w,e){var y,k,C,T,B,D,x,H,P,S,A,W,Y,z,M,X,R,I,F,t,L,q,O,E,V,G,N,K,Q,U,$,J,Z,_,ee=this,s=!0,n=!0,r=!1,a=!1,o=w.clone(!1,!1).empty(),te=be.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";function oe(e){var t,o,i,s,n,r,a,l,c,p,d,u,f,h,j,g,v=!1,m=!1;if(y=e,void 0===k)i=w.scrollTop(),s=w.scrollLeft(),w.css({overflow:"hidden",padding:0}),C=w.innerWidth()+Z,T=w.innerHeight(),w.width(C),k=be('<div class="jspPane" />').css("padding",J).append(w.children()),B=be('<div class="jspContainer" />').css({width:C+"px",height:T+"px"}).append(k).appendTo(w);else{if(w.css("width",""),v=y.stickToBottom&&20<(r=x-T)&&r-ve()<10,m=y.stickToRight&&20<(n=D-C)&&n-ge()<10,(g=w.innerWidth()+Z!=C||w.outerHeight()!=T)&&(C=w.innerWidth()+Z,T=w.innerHeight(),B.css({width:C+"px",height:T+"px"})),!g&&_==D&&k.outerHeight()==x)return w.width(C),0;_=D,k.css("width",""),w.width(C),B.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}function b(){var e=R,t=z;switch(f){case 40:ee.scrollByY(y.keyboardSpeed,!1);break;case 38:ee.scrollByY(-y.keyboardSpeed,!1);break;case 34:case 32:ee.scrollByY(T*y.scrollPagePercent,!1);break;case 33:ee.scrollByY(-T*y.scrollPagePercent,!1);break;case 39:ee.scrollByX(y.keyboardSpeed,!1);break;case 37:ee.scrollByX(-y.keyboardSpeed,!1)}return h=e!=R||t!=z}k.css("overflow","auto"),D=e.contentWidth||k.width(),x=k[0].scrollHeight,k.css("overflow",""),S=1<(P=x/T),(A=1<(H=D/C))||S?(w.addClass("jspScrollable"),(n=y.maintainPosition&&(z||R))&&(t=ge(),o=ve()),S&&(B.append(be('<div class="jspVerticalBar" />').append(be('<div class="jspCap jspCapTop" />'),be('<div class="jspTrack" />').append(be('<div class="jspDrag" />').append(be('<div class="jspDragTop" />'),be('<div class="jspDragBottom" />'))),be('<div class="jspCap jspCapBottom" />'))),I=B.find(">.jspVerticalBar"),F=I.find(">.jspTrack"),W=F.find(">.jspDrag"),y.showArrows&&(O=be('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",re(0,-1)).bind("click.jsp",me),E=be('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",re(0,1)).bind("click.jsp",me),y.arrowScrollOnHover&&(O.bind("mouseover.jsp",re(0,-1,O)),E.bind("mouseover.jsp",re(0,1,E))),ne(F,y.verticalArrowPositions,O,E)),L=T,B.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){L-=be(this).outerHeight()}),W.hover(function(){W.addClass("jspHover")},function(){W.removeClass("jspHover")}).bind("mousedown.jsp",function(e){be("html").bind("dragstart.jsp selectstart.jsp",me),W.addClass("jspActive");var t=e.pageY-W.position().top;return be("html").bind("mousemove.jsp",function(e){ce(e.pageY-t,!1)}).bind("mouseup.jsp mouseleave.jsp",le),!1}),ie()),A&&(B.append(be('<div class="jspHorizontalBar" />').append(be('<div class="jspCap jspCapLeft" />'),be('<div class="jspTrack" />').append(be('<div class="jspDrag" />').append(be('<div class="jspDragLeft" />'),be('<div class="jspDragRight" />'))),be('<div class="jspCap jspCapRight" />'))),V=B.find(">.jspHorizontalBar"),G=V.find(">.jspTrack"),M=G.find(">.jspDrag"),y.showArrows&&(Q=be('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",re(-1,0)).bind("click.jsp",me),U=be('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",re(1,0)).bind("click.jsp",me),y.arrowScrollOnHover&&(Q.bind("mouseover.jsp",re(-1,0,Q)),U.bind("mouseover.jsp",re(1,0,U))),ne(G,y.horizontalArrowPositions,Q,U)),M.hover(function(){M.addClass("jspHover")},function(){M.removeClass("jspHover")}).bind("mousedown.jsp",function(e){be("html").bind("dragstart.jsp selectstart.jsp",me),M.addClass("jspActive");var t=e.pageX-M.position().left;return be("html").bind("mousemove.jsp",function(e){de(e.pageX-t,!1)}).bind("mouseup.jsp mouseleave.jsp",le),!1}),N=B.innerWidth(),se()),A&&S&&(g=G.outerHeight(),e=F.outerWidth(),L-=g,be(V).find(">.jspCap:visible,>.jspArrow").each(function(){N+=be(this).outerWidth()}),N-=e,T-=e,C-=g,G.parent().append(be('<div class="jspCorner" />').css("width",g+"px")),ie(),se()),A&&k.width(B.outerWidth()-Z+"px"),x=k.outerHeight(),P=x/T,A&&((K=Math.ceil(1/H*N))>y.horizontalDragMaxWidth?K=y.horizontalDragMaxWidth:K<y.horizontalDragMinWidth&&(K=y.horizontalDragMinWidth),M.width(K+"px"),X=N-K,ue(R)),S&&((q=Math.ceil(1/P*L))>y.verticalDragMaxHeight?q=y.verticalDragMaxHeight:q<y.verticalDragMinHeight&&(q=y.verticalDragMinHeight),W.height(q+"px"),Y=L-q,pe(z)),n&&(he(m?D-C:t,!1),fe(v?x-T:o,!1)),k.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){je(e.target,!1)}),B.unbind(te).bind(te,function(e,t,o,i){var s=R=R||0,n=z=z||0,e=e.deltaFactor||y.mouseWheelSpeed;return ee.scrollBy(o*e,-i*e,!1),s==R&&n==z}),u=!1,B.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(e){e=e.originalEvent.touches[0];a=ge(),l=ve(),c=e.pageX,p=e.pageY,u=!(d=!1)}).bind("touchmove.jsp",function(e){if(u){var t=e.originalEvent.touches[0],o=R,e=z;return ee.scrollTo(a+c-t.pageX,l+p-t.pageY),d=d||5<Math.abs(c-t.pageX)||5<Math.abs(p-t.pageY),o==R&&e==z}}).bind("touchend.jsp",function(e){u=!1}).bind("click.jsp-touchclick",function(e){if(d)return d=!1}),y.enableKeyboardNavigation&&(j=[],A&&j.push(V[0]),S&&j.push(I[0]),k.bind("focus.jsp",function(){w.focus()}),w.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(e){if(e.target===this||j.length&&be(e.target).closest(j).length){var t=R,o=z;switch(e.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:f=e.keyCode,b();break;case 35:fe(x-T),f=null;break;case 36:fe(0),f=null}return!(h=e.keyCode==f&&t!=R||o!=z)}}).bind("keypress.jsp",function(e){if(e.keyCode==f&&b(),e.target===this||j.length&&be(e.target).closest(j).length)return!h}),y.hideFocus?(w.css("outline","none"),"hideFocus"in B[0]&&w.attr("hideFocus",!0)):(w.css("outline",""),"hideFocus"in B[0]&&w.attr("hideFocus",!1))),y.clickOnTrack&&(ae(),S&&F.bind("mousedown.jsp",function(i){if(void 0===i.originalTarget||i.originalTarget==i.currentTarget){var s,n=be(this),e=n.offset(),r=i.pageY-e.top-z,a=!0,l=function(){var e=n.offset(),t=i.pageY-e.top-q/2,o=T*y.scrollPagePercent,e=Y*o/(x-T);if(r<0)t<z-e?ee.scrollByY(-o):ce(t);else{if(!(0<r))return void c();z+e<t?ee.scrollByY(o):ce(t)}s=setTimeout(l,a?y.initialDelay:y.trackClickRepeatFreq),a=!1},c=function(){s&&clearTimeout(s),s=null,be(document).unbind("mouseup.jsp",c)};return l(),be(document).bind("mouseup.jsp",c),!1}}),A&&G.bind("mousedown.jsp",function(i){if(void 0===i.originalTarget||i.originalTarget==i.currentTarget){var s,n=be(this),e=n.offset(),r=i.pageX-e.left-R,a=!0,l=function(){var e=n.offset(),t=i.pageX-e.left-K/2,o=C*y.scrollPagePercent,e=X*o/(D-C);if(r<0)t<R-e?ee.scrollByX(-o):de(t);else{if(!(0<r))return void c();R+e<t?ee.scrollByX(o):de(t)}s=setTimeout(l,a?y.initialDelay:y.trackClickRepeatFreq),a=!1},c=function(){s&&clearTimeout(s),s=null,be(document).unbind("mouseup.jsp",c)};return l(),be(document).bind("mouseup.jsp",c),!1}})),function(){if(location.hash&&1<location.hash.length){var e,t,o=escape(location.hash.substr(1));try{e=be("#"+o+', a[name="'+o+'"]')}catch(e){return}e.length&&k.find(o)&&(0===B.scrollTop()?t=setInterval(function(){0<B.scrollTop()&&(je(e,!0),be(document).scrollTop(B.position().top),clearInterval(t))},50):(je(e,!0),be(document).scrollTop(B.position().top)))}}(),y.hijackInternalLinks&&(be(document.body).data("jspHijack")||(be(document.body).data("jspHijack",!0),be(document.body).delegate('a[href*="#"]',"click",function(e){var t,o=this.href.substr(0,this.href.indexOf("#")),i=location.href;if(o===(i=-1!==location.href.indexOf("#")?location.href.substr(0,location.href.indexOf("#")):i)){o=escape(this.href.substr(this.href.indexOf("#")+1));try{t=be("#"+o+', a[name="'+o+'"]')}catch(e){return}t.length&&((i=t.closest(".jspScrollable")).data("jsp").scrollToElement(t,!0),i[0].scrollIntoView&&(o=be(window).scrollTop(),((t=t.offset().top)<o||t>o+be(window).height())&&i[0].scrollIntoView()),e.preventDefault())}})))):(w.removeClass("jspScrollable"),k.css({top:0,left:0,width:B.width()-Z}),B.unbind(te),k.find(":input,a").unbind("focus.jsp"),w.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),k.unbind(".jsp"),ae()),y.autoReinitialise&&!$?$=setInterval(function(){oe(y)},y.autoReinitialiseDelay):!y.autoReinitialise&&$&&clearInterval($),i&&w.scrollTop(0)&&fe(i,!1),s&&w.scrollLeft(0)&&he(s,!1),w.trigger("jsp-initialised",[A||S])}function ie(){F.height(L+"px"),z=0,t=y.verticalGutter+F.outerWidth(),k.width(C-t-Z);try{0===I.position().left&&k.css("margin-left",t+"px")}catch(e){}}function se(){B.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){N-=be(this).outerWidth()}),G.width(N+"px"),R=0}function ne(e,t,o,i){var s="before",n="after";(t="os"==t?/Mac/.test(navigator.platform)?"after":"split":t)==s?n=t:t==n&&(s=t,t=o,o=i,i=t),e[s](o)[n](i)}function re(e,t,o){return function(){return function(e,t,o,i){o=be(o).addClass("jspActive");var s,n,r=!0,a=function(){0!==e&&ee.scrollByX(e*y.arrowButtonSpeed),0!==t&&ee.scrollByY(t*y.arrowButtonSpeed),n=setTimeout(a,r?y.initialDelay:y.arrowRepeatFreq),r=!1};a(),s=i?"mouseout.jsp":"mouseup.jsp",(i=i||be("html")).bind(s,function(){o.removeClass("jspActive"),n&&clearTimeout(n),n=null,i.unbind(s)})}(e,t,this,o),this.blur(),!1}}function ae(){G&&G.unbind("mousedown.jsp"),F&&F.unbind("mousedown.jsp")}function le(){be("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),W&&W.removeClass("jspActive"),M&&M.removeClass("jspActive")}function ce(e,t){var o,i,s,n;S&&(e<0?e=0:Y<e&&(e=Y),o=new be.Event("jsp-will-scroll-y"),w.trigger(o,[e]),o.isDefaultPrevented()||(i=0===(o=e||0),s=o==Y,n=-e/Y*(x-T),(t=void 0===t?y.animateScroll:t)?ee.animate(W,"top",e,pe,function(){w.trigger("jsp-user-scroll-y",[-n,i,s])}):(W.css("top",e),pe(e),w.trigger("jsp-user-scroll-y",[-n,i,s]))))}function pe(e){void 0===e&&(e=W.position().top),B.scrollTop(0);var t=0===(z=e||0),o=z==Y,i=-e/Y*(x-T);s==t&&r==o||(s=t,r=o,w.trigger("jsp-arrow-change",[s,r,n,a])),e=o,y.showArrows&&(O[t?"addClass":"removeClass"]("jspDisabled"),E[e?"addClass":"removeClass"]("jspDisabled")),k.css("top",i),w.trigger("jsp-scroll-y",[-i,t,o]).trigger("scroll")}function de(e,t){var o,i,s,n;A&&(e<0?e=0:X<e&&(e=X),o=new be.Event("jsp-will-scroll-x"),w.trigger(o,[e]),o.isDefaultPrevented()||(i=0===(o=e||0),s=o==X,n=-e/X*(D-C),(t=void 0===t?y.animateScroll:t)?ee.animate(M,"left",e,ue,function(){w.trigger("jsp-user-scroll-x",[-n,i,s])}):(M.css("left",e),ue(e),w.trigger("jsp-user-scroll-x",[-n,i,s]))))}function ue(e){void 0===e&&(e=M.position().left),B.scrollTop(0);var t=0===(R=e||0),o=R==X,i=-e/X*(D-C);n==t&&a==o||(n=t,a=o,w.trigger("jsp-arrow-change",[s,r,n,a])),e=o,y.showArrows&&(Q[t?"addClass":"removeClass"]("jspDisabled"),U[e?"addClass":"removeClass"]("jspDisabled")),k.css("left",i),w.trigger("jsp-scroll-x",[-i,t,o]).trigger("scroll")}function fe(e,t){ce(e/(x-T)*Y,t)}function he(e,t){de(e/(D-C)*X,t)}function je(e,t,o){var i,s,n,r,a,l,c=0,p=0;try{i=be(e)}catch(e){return}for(r=i.outerHeight(),s=i.outerWidth(),B.scrollTop(0),B.scrollLeft(0);!i.is(".jspPane");)if(c+=i.position().top,p+=i.position().left,i=i.offsetParent(),/^body|html$/i.test(i[0].nodeName))return;e=(n=ve())+T,c<n||t?a=c-y.horizontalGutter:e<c+r&&(a=c-T+r+y.horizontalGutter),isNaN(a)||fe(a,o),a=(r=ge())+C,p<r||t?l=p-y.horizontalGutter:a<p+s&&(l=p-C+s+y.horizontalGutter),isNaN(l)||he(l,o)}function ge(){return-k.position().left}function ve(){return-k.position().top}function me(){return!1}Z="border-box"===w.css("box-sizing")?J=0:(J=w.css("paddingTop")+" "+w.css("paddingRight")+" "+w.css("paddingBottom")+" "+w.css("paddingLeft"),(parseInt(w.css("paddingLeft"),10)||0)+(parseInt(w.css("paddingRight"),10)||0)),be.extend(ee,{reinitialise:function(e){oe(e=be.extend({},y,e))},scrollToElement:function(e,t,o){je(e,t,o)},scrollTo:function(e,t,o){he(e,o),fe(t,o)},scrollToX:function(e,t){he(e,t)},scrollToY:function(e,t){fe(e,t)},scrollToPercentX:function(e,t){he(e*(D-C),t)},scrollToPercentY:function(e,t){fe(e*(x-T),t)},scrollBy:function(e,t,o){ee.scrollByX(e,o),ee.scrollByY(t,o)},scrollByX:function(e,t){de((ge()+Math[e<0?"floor":"ceil"](e))/(D-C)*X,t)},scrollByY:function(e,t){ce((ve()+Math[e<0?"floor":"ceil"](e))/(x-T)*Y,t)},positionDragX:function(e,t){de(e,t)},positionDragY:function(e,t){ce(e,t)},animate:function(e,t,o,i,s){var n={};n[t]=o,e.animate(n,{duration:y.animateDuration,easing:y.animateEase,queue:!1,step:i,complete:s})},getContentPositionX:ge,getContentPositionY:ve,getContentWidth:function(){return D},getContentHeight:function(){return x},getPercentScrolledX:function(){return ge()/(D-C)},getPercentScrolledY:function(){return ve()/(x-T)},getIsScrollableH:function(){return A},getIsScrollableV:function(){return S},getContentPane:function(){return k},scrollToBottom:function(e){ce(Y,e)},hijackInternalLinks:be.noop,destroy:function(){var e=ve(),t=ge();w.removeClass("jspScrollable").unbind(".jsp"),k.unbind(".jsp"),w.replaceWith(o.append(k.children())),o.scrollTop(e),o.scrollLeft(t),$&&clearInterval($)}}),oe(e)}return o=be.extend({},be.fn.jScrollPane.defaults,o),be.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){o[this]=o[this]||o.speed}),this.each(function(){var e=be(this),t=e.data("jsp");t?t.reinitialise(o):(be("script",e).filter('[type="text/javascript"],:not([type])').remove(),t=new i(e,o),e.data("jsp",t))})},be.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}});