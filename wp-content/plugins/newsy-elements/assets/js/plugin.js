!function(h){"use strict";window.newsy=window.newsy||{};var e=h("body"),n="1"===newsy_block_loc.rtl;window.newsy.video={play_flag:!1,sound_flag:!1,current_el:!1,init:function(a){void 0===a&&(a=h("body"));var t=this,i=!1;h(a).find(".ak-youtube-player").length&&h(a).find(".ak-youtube-player").each(function(){var a,i;h(this).hasClass("inited")||(h(this).addClass("inited"),a=h(this).data("autoplay"),i=h(this).data("repeat"),t.init_video_youtube(h(this),a,i))}),h(a).find(".ak-vimeo-player").length&&h(a).find(".ak-vimeo-player").each(function(){var a,i;h(this).hasClass("inited")||(h(this).addClass("inited"),a=h(this).data("autoplay"),i=h(this).data("repeat"),t.init_video_vimeo(h(this),a,i))}),h(a).find("[data-type='soundcloud']").length&&h(a).find("[data-type='soundcloud']").each(function(){h(this).hasClass("inited")||(h(this).addClass("inited"),t.init_soundcloud(h(this)))}),h(a).find("[data-type='audio']").length&&h(a).find("[data-type='audio']").each(function(){h(this).hasClass("inited")||(h(this).addClass("inited"),t.init_audio(h(this)))}),h(a).find('.ak-featured-thumb.size-auto img[data-src$=".gif"]').length&&(h(a).find('.ak-featured-thumb.size-auto img[data-src$=".gif"]').each(function(a,i){h(this).hasClass("inited")||(h(this).addClass("inited"),h(i).attr("onload","newsy.video.init_gif(this)"))}),i=!0),h(a).find("[data-type='video']").length&&(h(a).find("[data-type='video']").each(function(){h(this).hasClass("inited")||(h(this).addClass("inited"),t.init_video_html5(h(this)))}),i=!0),i&&h(window).on("blur",function(){t.play_flag=!1,t.sound_flag=!1,t.stopPlay()})},init_video_youtube:function(a,i,t){var e=this.youtube_parser(h(a).attr("data-src")),n="",s="",s=t?(n+=i||"true"==i?"autoplay=1&":"",'<iframe width="700" height="500" src="//www.youtube.com/v/'+e+"?version=3&"+(n+=t||"true"==t?"loop=1&playlist="+e:"")+'showinfo=0&theme=light&autohide=1&rel=0&wmode=opaque" frameborder="0" allowfullscreen></iframe>'):'<iframe width="700" height="500" src="//www.youtube.com/embed/'+e+"?"+(n+=i||"true"==i?"autoplay=1&":"")+'showinfo=0&theme=light&autohide=1&rel=0&wmode=opaque" frameborder="0" allowfullscreen></iframe>';h(".ak-video-container",a).append(s)},init_video_vimeo:function(a,i,t){var e="";e+=i||"true"==i?"autoplay=1&":"";e='<iframe src="//player.vimeo.com/video/'+this.vimeo_parser(h(a).attr("data-src"))+"?"+(e+=t||"true"==t?"loop=1&":"")+'title=0&byline=0&portrait=0" width="700" height="500" frameborder="0" mozallowfullscreen webkitallowfullscreen allowfullscreen></iframe>';h(".ak-video-container",a).append(e)},init_soundcloud:function(a){var i=h(a).attr("data-src"),i='<iframe src="https://w.soundcloud.com/player/?url='+encodeURIComponent(i)+'" width="700" height="500" frameborder="0"></iframe>';h(".ak-video-container",a).append(i)},init_audio:function(a){var i="",t="",t="<audio preload='none' style='width: 100%; visibility: hidden;' controls='controls'>"+(i=""!==h(a).data("mp3")?"<source type='audio/mpeg' src='"+h(a).data("mp3")+"' />":i)+(t=""!==h(a).data("ogg")?"<source type='audio/ogg' src='"+h(a).data("ogg")+"' />":t)+"</audio>";h(a).append(t);t={};(t="undefined"!=typeof _wpmejsSettings?_wpmejsSettings:t).success=function(a){var i,t;"flash"===a.pluginType&&(i=a.attributes.autoplay&&"false"!==a.attributes.autoplay,t=a.attributes.loop&&"false"!==a.attributes.loop,i&&a.addEventListener("canplay",function(){a.play()},!1),t&&a.addEventListener("ended",function(){a.play()},!1))},h(a).find("audio").mediaelementplayer(t)},init_video_html5:function(a){var i=this,t=h(a),e=h(a).parents(".ak-featured-cover"),n=["ak-player-wrap","ak-player-responsive"];t.addClass("ak-video-setup");var s=h(a).data("cover"),o="yes"===h(a).data("is-gif"),l="",d="",r="preload='auto'";o&&(r+=" loop='loop' muted='muted'");var p,c,d="<video width='100%' height='auto' poster='"+s+"' "+r+">"+(l=""!==h(a).data("mp4")?"<source type='video/mp4' src='"+h(a).data("mp4")+"' />":l)+(d=""!==h(a).data("webm")?"<source type='video/webm' src='"+h(a).data("webm")+"' />":d)+"</video>";o?(c=h('<div class="ak-player-overlay"><div class="ak-player-control">GIF</div></div>').insertBefore(t),n.push("ak-gif-wrap")):((o="")!==(p=h(a).data("length"))&&(o+='<div class="ak-video-length">'+p+"</div>"),c=h('<div class="ak-player-overlay"><div class="ak-player-control"><i class="fa fa-play"></i></div>'+(o+='<div class="ak-video-sound-toggle off"><i class="ak-icon fa fa-volume-off"></i><i class="ak-icon fa fa-volume-up"></i></div>')+"</div>").insertBefore(t)),t.append(d),t.add(c).add(p).wrapAll(h("<div />",{class:n.join(" ")})),h(".ak-player-wrap",e).on("click",function(a){a.preventDefault(),i.initClick(h(this))}),i.initPlayerWrapWayPoint(e)},init_gif:function(a,i){var t=void 0!==i?i:".ak-featured-cover",e=this,n=h(a),i=h(a).parents(t);n.addClass("ak-video-setup ak-player-image"),n.removeAttr("autoplay"),n.removeAttr("controls");a=h('<div class="ak-player-overlay"><div class="ak-player-control">GIF</div></div>').insertBefore(n),t=h("<canvas />",{class:"ak-player-canvas"}).attr({width:0,height:0}).insertBefore(n),t=n.add(a).add(t).wrapAll(h("<div />",{class:["ak-player-wrap","ak-player-responsive","ak-gif-wrap"].join(" ")})).parent();i.html(t),t.on("click",function(a){a.preventDefault(),e.initClick(h(this))}),n.imagesLoaded().progress(function(a,i){var t=h(i.img).siblings("canvas"),e="transitionend webkitTransitionEnd oTransitionEnd otransitionend",n=h(i.img).width(),s=h(i.img).height();t.attr({width:n,height:s}),t[0].getContext("2d").drawImage(h(i.img).get(0),0,0,n,s),t.addClass("ak-player-canvas-ready").on(e,function(){h(this).off(e),h(i.img).addClass("ak-player-image-ready")})}),e.initPlayerWrapWayPoint(i)},initClick:function(a){var i=this,t=h(a).hasClass("ak-player-wrap")?h(a):h(a).find(".ak-player-wrap"),a=t.hasClass("ak-player-active");i.stopPlay(i.current_el),t.hasClass("ak-gif-wrap")?(i.play_flag=!a,a?i.stopPlay(t):i.startPlay(t)):(i.play_flag=!0,i.sound_flag=!i.sound_flag,i.startPlay(t))},initPlayerWrapWayPoint:function(a){var t=this;h(".ak-player-wrap",a).each(function(){var i=h(this);h(this).hasClass("point-initted")||(h(this).addClass("point-initted"),h(this).waypoint(function(a){"down"===a&&(t.stopPlay(t.current_el),t.play_flag&&t.startPlay(i))},{offset:"20%",context:window}),h(this).waypoint(function(a){"up"===a&&(t.stopPlay(t.current_el),t.play_flag&&t.startPlay(i))},{offset:"0%",context:window}))})},startPlay:function(a){var i;!1!==a&&(this.toggleVideo(h(a),this.play_flag),this.toggleAudio(h(a),this.sound_flag),h(a).addClass("ak-player-active"),h(a).hasClass("ak-gif-wrap")&&(i=h(a).find("canvas"),h(i).removeClass("ak-player-canvas-ready").addClass("ak-player-canvas-active")),this.current_el=h(a))},stopPlay:function(a){!1!==a&&(this.toggleVideo(a,!1),this.toggleAudio(a,!1),h(a).removeClass("ak-player-active"),h(a).hasClass("ak-gif-wrap")&&(a=h(a).find("canvas"),h(a).removeClass("ak-player-canvas-active").addClass("ak-player-canvas-ready")),this.current_el=!1)},toggleAudio:function(a,i){var t;h(a).find("video").length&&(t=h(a).find("video")[0],a=h(a).find(".ak-video-sound-toggle"),t.muted=!i,i?a.removeClass("off"):a.addClass("off"))},toggleVideo:function(i,a){var t,e;h(i).find("video").length&&(t=this,e=h(i).find("video")[0],a?e.play():e.pause(),e.onended=function(a){t.stopPlay(h(i))})},youtube_parser:function(a){a=a.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/);if(a&&11===a[7].length)return a[7];window.alert("Url Incorrect")},vimeo_parser:function(a){var i=a.match(/http:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/);return(i=i||a.match(/https:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/))?i[2]:void window.alert("not a vimeo url")}},newsy.video.init(),window.newsy.video_playlist={init:function(a){var i=this;void 0===a&&(a=h("body")),h(a).find(".ak-block-video-playlist").length&&h(a).find(".ak-block-video-playlist").each(function(){i.init_playlist(this)})},init_playlist:function(a){h(a).hasClass("ak-video-playlist-inited")||(h(a).hasClass("ak-video-playlist-vertical")?this.vertical_playlist(a):this.horizontal_playlist(a),this.on_click(a),h(a).addClass("ak-video-playlist-inited"))},vertical_playlist:function(s){var s=h(s),o=h(s).hasClass("ak-block-width-1");s.find(".ak-video-playlist-list-inner-wrap").jScrollPane();var a=s.find(".ak-video-playlist-list-inner-wrap").data("jsp");function i(a){var i=s.find(".ak-video-playlist-playing-wrap"),t=s.find(".ak-video-playlist-player-wrap"),e=s.find(".ak-video-playlist-list-inner-wrap"),n=t.height(),n=o||h(window).width()<768?250:t.height()-i.outerHeight();e.height(n),a&&a.reinitialise()}h(window).on("resize",function(){i(a)}),i(a)},horizontal_playlist:function(a){var i=(a=h(a)).width(),t=Math.floor(i/160),e=t-1,i=a.hasClass("ak-video-playlist-dark")?"":10;a.find(".ak-video-playlist-list-inner-wrap").addClass("owl-carousel").owlCarousel({rtl:1==n,lazyLoad:!0,dots:!1,loop:!1,nav:!0,items:t,margin:i,autoHeight:!0,responsive:{0:{items:2},480:{items:3},568:{items:4},768:{items:e},1024:{items:t}}})},on_click:function(a){var n=this;(a=h(a)).find(".ak-video-playlist-item").on("click",function(a){a.preventDefault();var i=h(this).data("id"),t=h(this).parents(".ak-block-video-playlist"),e=h(t).find(".ak-video-playlist-player-holder"),a=h(t).attr("id"),a=window[a];return h(t).find("a.ak-video-playlist-item").removeClass("active"),h(this).addClass("active"),h(e).css("height",h(t).height()).html('<div class="ak-loading-box" style="display:block">'+newsy_block_loc.loader_html+"</div>"),n.load_item(this,a[i]),!1})},load_item:function(a,i){var t=h(a).parents(".ak-block-video-playlist"),e=h(t).find(".ak-video-playlist-player-holder"),t=h(t).find(".ak-video-playlist-playing-title");h(e).html(i),newsy.video.init(h(e));a="<a href='"+h(a).attr("href")+"'>"+h(a).find(".ak-video-playlist-item-title").text()+"</a>";h(e).css("height","auto"),h(t).find("h2").html(a)}},newsy.video_playlist.init(),window.newsy.pagination={init:function(a){var i=n?['<i class="fa fa-angle-right" aria-hidden="true"></i>','<i class="fa fa-angle-left" aria-hidden="true"></i>']:['<i class="fa fa-angle-left" aria-hidden="true"></i>','<i class="fa fa-angle-right" aria-hidden="true"></i>'],t=(a=void 0===a?e:a).find(".ak-pagination-container");t.length&&t.Ak_Pagination({is_rtl:1==n,ajax_action:"ajax_block_pagination",loading_html:newsy_block_loc.loader_html,masonry_item_class:".ak-module"});t=a.find(".ak-masonry");t.length&&t.Ak_Pagination({is_rtl:1==n,masonry_item_class:".ak-module"});t=a.find(".ak-slider-container.ak-slider-1");t.length&&t.Ak_Slider({rtl:1==n,autoWidth:!0,navText:i});t=a.find(".ak-slider-container.ak-slider-2");t.length&&t.Ak_Slider({rtl:1==n,navText:i});t=a.find(".ak-slider-container.ak-slider-3");t.length&&t.Ak_Slider({rtl:1==n,navText:i});a=a.find(".ak-block-grid.ak-slider-container");a.length&&a.Ak_Slider({rtl:1==n,navText:i})}},newsy.pagination.init(),h(".ak-pagination-container").on("ak-pagination-after-response",function(a,i){newsy.video.init(h(i)),newsy.share&&newsy.share.init(h(i))}),window.newsy.block_ajax={init:function(a){a=h(void 0===a?"body":a),newsy.pagination.init(a),newsy.video.init(a),newsy.video_playlist.init(a),newsy.share&&newsy.share.init(a),newsy.main&&(newsy.main.setup_menu(a),newsy.main.init_more_menu())}}}(jQuery);